[toc]

# 项目过程记录

## 1.软件工程过程

开始阶段：

可行性分析和需求的初步版本

细化阶段：

需求分析 管理计划 商业案例

构建阶段：

用户手册

体系结构

全部制品

转换阶段：

完成

### 1.1需求分析

管理员负责把录取信息(A)录入新的数据库(B) 排序 分配学号和班级寝室

可以分专业录入

学生入学之后，进行注册，需要输入：姓名 性别 身份证号 录取通知书编号等信息 启动审核 审核通过之后（B记录着姓名身份证号 学号 班级专业 寝室 录取通知书编号，如果提交信息符合实际就通过）显示注册成功，并告诉该学生的所有信息，并补充一些信息。

有一个初始密码 进入页面可以改密码

寝室班级都可以增删改（管理员）

档案管理的意思是：

学籍状况包括“在读”，“休学”，“退学”，“转出”4种状态；奖惩记录记录学生所获各种奖励或惩罚的事件、地点、日期及编号信息。

C表记录每个专业学费

学生可以登录缴费系统进行缴费 查看缴费情况

然后有一个财务系统D记录每个学生什么时候交了多少钱以及交了钱的总数 还差多少钱没有交

财务管理员可以增删改这些信息



关于分配班级寝室的需知：

1.先规定哪个专业在哪栋楼

2.一个班的住在一起



可供学生查询的信息：

1.财务状况

2.基本信息

3.奖惩和学籍状态



管理员权限问题：

管理员分为以下几种：

1.分配学生班级寝室的管理员 （一个应用）

2.财务管理 管理学籍和奖惩的管理员（

录取通知书编号



### 1.2数据库设计

1.表A (w_init)

| 身份证号（key) | 姓名     | 录取通知书编号 | 性别     | 专业号   | 毕业院校 |
| -------------- | -------- | -------------- | -------- | -------- | -------- |
| w_no           | w_name   | w_lno          | w_sex    | w_mno    | w_school |
| char(50)       | char(50) | char(50)       | char(10) | char(20) | char(70) |

说明：

这个表是最初始的表 是学生录取的信息 还没有分配班级寝室学号之类的 这个表也是之后审核学生信息参考的表

这个表谁也不能动好吧

2.表B（w_dist)

| 身份证号(key) | 姓名 | 专业号（外键） | 班级 | 学号 | 寝室号 | 宿舍楼 |
| ------------- | ---- | -------- | ---- | ---- | ---- | ---- |
|w_no          | w_name | w_mno | w_class | w_ano | w_dno | w_dorm |
|               |      | 对应表D | char(20) | char(50) | char(10) | char(10) |

说明：宿舍楼的话 是自己生成的 因为表D

学号工作完成之后，生成一个表格：

3.表C（w_basic)

| 学号（key) | 姓名 | 身份证号（外键） |
| ---------- | ---- | ---------------- |
|w_ano       | w_name | w_no             |
|            |      | 对应表A |

4.表D：(w_major)

| 专业号（key) | 专业名字 | 宿舍楼 | 学费 |
| ------------ | -------- | ------ | ---- |
|w_mno              | w_mname         | w_dorm | w_fee |
|              | char(30) |        | int |

这个表的专业号专业名字和学费都是初始都有的 宿舍楼需要管理员分配



5.表（w_stup）

这个表是存储学生密码的表

| 学号(key) | 密码     |
| --------- | -------- |
| w_ano     | w_pass   |
| char(50)  | char(20) |



6.表F(w_reward)

| 学号(key) | 姓名 | 日期   | 奖项级别 | 奖名字  | 奖项     | 主办方  |
| --------- | ---- | ------ | -------- | ------- | -------- | ------- |
|           |      | w_date | w_rl     | w_thing | w_rename | w_organ |
|           |      |        |          |         |          |         |

说明：奖表

学生需要申请提交奖励 然后由管理员审核

7.表G（w_punish)

| 学号(key) | 姓名 | 日期   | 何事    | 惩罚级别 |
| --------- | ---- | ------ | ------- | -------- |
|           |      | w_date | w_thing | w_pl     |
|           |      |        |         |          |

说明：惩罚表 管理员自己添加

8.表H（w_record)

| 学号(key) | 姓名 | 日期 | 缴费金额 |
| --------- | ---- | ---- | -------- |
|           |      |      | w_amount |
|           |      |      |          |

这个表学生和管理员都可以往里面添加数据 管理员可以修改

9.表I（w_total)

| 学号(key) | 姓名 | 应交      | 实交      | 学籍状态 |
| --------- | ---- | --------- | --------- | -------- |
|           |      | w_amount1 | w_amount2 | w_state  |
|           |      | int       | int       | char(20) |

说明：应收为管理员给全体学生加学费 通过学号查找专业号可以找到学费,学籍状态分为在读 休学 退学 转出 由管理员修改

10.表10(w_inform)

这个表是收录一些无用的信息的 年龄父母电话家乡之类的 学生可以自行修改



## 2.中期报告时候做的

### 2.1创建django

创建三次才成功 无语

<img src="C:\Users\tblx\Desktop\毕业设计\笔记\屏幕截图 2022-03-12 152825.png" alt="屏幕截图 2022-03-12 152825" style="zoom:60%;" />

这样是正常的 如果显示安装不了django 就把项目删除掉 重启重新装 出现跟djangoA一样的目录才算正常 不然没用

### 2.2连接数据库

+增加pymysql然后在sb连接里面创建了一个数据库叫**w_abs**

### 2.3创建一个超级管理员

用户名：wlqtc

密码：1234567

电子邮箱：1207637937@qq.com

### 2.4跟前端框架连接起来

setting.py里面放了一些东西

文件的目录放的方法见项目

问题：app要怎么分？？？

用model创建表 再导入到数据库 还是先在数据库里面创建表再导回来

想整一个总表 每个app都可以用 怎么搞

想把管理员和学生放在两个app中 想分一些 而且管理员进入的入口学生不可见（就跟学校的oj一样）

但是每个表只能导入到一个Model里面（存疑 因为我看导到哪就在哪用）

如果两个app都想用这个表怎么办 对这个表的两边都想修改 

答案：模板层是通用的 都写一个model里面就行

### 2.5创建了两个表

先创建两个登录注册要用的

1.

```sql
create table w_init
(
 w_no char(50) not null,
 w_lno char(50) not null,
 w_name char(50) not null,
w_sex char(10) ,
w_mno char(20) not null,
w_school char(70),
primary key(w_no)
);
```

2.

```sql
create table w_stup
(
w_ano char(50) not null,
w_pass char(20) not null,
primary key(w_ano)
);
```

新问题：

这里我把注册的数据按照身份证号保存的 下次改成抓取学生的学号再保存

还有如果使用创建表再导入的话 原来的会被覆盖 烦内

看看还有什么别的方式

前端那些标签还是需要学一下

django操作数据库学习一下

**学生的登录功能和注册功能做完了**

### 2.6关于前端的一些问题

今天出现了一个问题就是Login.html和register.html调用同一个css

但是login.html可以正常使用，register.html一直显示报错

问题出在：因为调用login.html的页面的网址是/polls

对应这一句话：

```python
urlpatterns = [
    path('', views.toLogin_view),  # 这一句话
    path('index/', views.Login_view),
    path('toregister/', views.toregister_view),
    path('register/', views.register_view),
]
```

因为tologin 这个界面的地址是http://127.0.0.1:8000/polls/ 所以可以抓到css

```html
<link rel="stylesheet" href="../static/bootstrap/css/freestyle.css">
```

但是toregister的页面是http://127.0.0.1:8000/polls/toregister/ 多了一个所以抓不到

必须写成

```html
<link rel="stylesheet" href="../../static/bootstrap/css/freestyle.css">
```

这个虽然在文件中显示无法解析该文件，但是网站可以抓到

正常来讲这个不应该跟网站名字有关系的，个人理解是网站和项目抓取的方式不一样，网站可能因为../的缘故抓的是网址，但是在本地抓的是文件

所以感觉还是**静态配置**的有问题，这样做只能管一时，应该之后还需要改
